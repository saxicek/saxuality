---
layout: post
title: WPF and Culture
date: '2008-05-29T14:09:00.011+02:00'
author: sax
tags:
- date format
- xaml
- WPF
- CultureInfo
modified_time: '2010-01-22T11:32:20.216+01:00'
blogger_id: tag:blogger.com,1999:blog-17453343.post-4065925521152599240
blogger_orig_url: http://saxuality.blogspot.com/2008/05/wpf-and-culture.html
---

I develop an application for my local Czech client and I went to troubles with default date formatting. Date is in the Czech republic formated as dd.mm.yyyy and I got mm/dd/yyyy instead. Then I found out that my culture is set to en-US.<br />A simple solution I found <a href="http://serialseb.blogspot.com/2007/04/wpf-tips-1-have-all-your-dates-times.html">here</a>:<br />In short:<br /><pre class="brush: csharp"><br />static App()<br />{<br /> FrameworkElement.LanguageProperty.OverrideMetadata(<br />     typeof(FrameworkElement),<br />     new FrameworkPropertyMetadata(<br />         XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag)));<br />}<br /></pre><br />Unfortunately that was just one part of the problem. <i>Datetime</i> value is converted to "dd.mm.yyyy hh:mi:ss" by default and wanted to show just the date part. I found a nice blog entry <a href="http://learnwpf.com/Posts/Post.aspx?postId=05229e33-fcd4-44d5-9982-a002f2250a64">here</a>, but the code needs some improvements mentioned in the discussion below, so I decided to include modified converter class below. Also notice that because of curl brackets the <a href="http://msdn.microsoft.com/cs-cz/library/az4se3k1%28en-us%29.aspx">format</a> should be specified this way - ConverterParameter="{}{0:d}".<br /><br />Example of xaml file:<br /><pre class="brush: xml"><br />&lt;Window x:Class="ProjectName.WindowName"<br />    ...<br />    xmlns:conv="clr-namespace:ProjectName.Converters"<br />    ...<br />        &lt;Window.Resources&gt;<br />            &lt;conv:FormattingConverter x:Key="Formatter"/&gt;<br />        &lt;/Window.Resources&gt;<br />    ...<br />    &lt;TextBox Name="textBoxDate"&gt;<br />        &lt;TextBox.Text&gt;<br />            &lt;Binding Path="born" Converter="{StaticResource Formatter}" ConverterParameter="{}{0:d}"/&gt;<br />        &lt;/TextBox.Text&gt;<br />    &lt;/TextBox&gt;<br />    ...<br /></pre><br />Complete code for FormattingConverter:<br /><pre class="brush: csharp"><br />using System;<br />using System.Windows.Data;<br />using System.ComponentModel;<br /><br />namespace WpfFileRegister.Converters<br />{<br />  [ValueConversion(typeof(object), typeof(string))]<br />  public class FormattingConverter : IValueConverter<br />  {<br />      #region IValueConverter Members<br /><br />      object IValueConverter.Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)<br />      {<br />          string formatString = parameter as string;<br />          if (formatString != null)<br />          {<br />              return string.Format(culture, formatString, value);<br />          }<br />          else<br />          {<br />              return value.ToString();<br />          }<br />      }<br /><br />      object IValueConverter.ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)<br />      {<br />          TypeConverter converter = TypeDescriptor.GetConverter(targetType);<br />          object targetValue = null;<br /><br />          if (converter.CanConvertFrom(value.GetType()))<br />          {<br />              targetValue = converter.ConvertFrom(value);<br />          }<br /><br />          return targetValue;<br />      }<br /><br />      #endregion<br />  }<br />}<br /></pre>