---
layout: post
title: Oracle Designer - more to application system comparation
date: '2008-09-16T17:44:00.008+02:00'
author: Libor Nenad√°l
tags:
- Oracle Designer
modified_time: '2010-01-21T17:34:44.493+01:00'
blogger_id: tag:blogger.com,1999:blog-17453343.post-8883332821637810902
blogger_orig_url: http://saxuality.blogspot.com/2008/09/oracle-designer-more-to-application.html
---

I wrote today two more comparative scripts - one compares domains and the second domain allowable values. Here it goes:<br /><ol><li>Compare domains<br /><pre>WITH domain_system AS (<br />SELECT d.NAME domain<br />      ,d.format<br />      ,d.average_attribute_length<br />      ,d.maximum_attribute_length<br />      ,d.attribute_precision<br />      ,d.unit_of_measure<br />      ,d.derivation<br />      ,d.datatype<br />      ,d.average_column_length<br />      ,d.maximum_column_length<br />      ,d.column_precision<br />      ,d.default_value_type<br />      ,d.default_value<br />      ,s.NAME system<br />  FROM repadm.ci_domains d<br />  JOIN repadm.ci_app_sys_domains sd ON sd.domain_reference = d.id<br />  JOIN repadm.ci_application_systems s ON s.id = sd.application_system_reference<br />)<br />SELECT t.system<br />      ,t.domain<br />      ,t.average_column_length, t2.average_column_length<br />      ,DECODE(t2.domain, t.domain, 'different', 'missing')<br />      ,CASE<br />         WHEN lnnvl(t.domain = t2.domain) THEN 'Domain is missing'<br />         WHEN (t.format IS NOT NULL OR t2.format IS NOT NULL) AND lnnvl(t.format = t2.format) THEN 'Format is different: ['||nvl(t.format, '<NULL>')||'] <> ['||nvl(t2.format, '<NULL>')||']'<br />         WHEN (t.average_attribute_length IS NOT NULL OR t2.average_attribute_length IS NOT NULL) AND lnnvl(t.average_attribute_length = t2.average_attribute_length) THEN 'Average Att Length is different: ['||nvl(to_char(t.average_attribute_length), '<NULL>')||'] <> ['||nvl(to_char(t2.average_attribute_length), '<NULL>')||']'<br />         WHEN (t.maximum_attribute_length IS NOT NULL OR t2.maximum_attribute_length IS NOT NULL) AND lnnvl(t.maximum_attribute_length = t2.maximum_attribute_length) THEN 'Maximum Att Length is different: ['||nvl(to_char(t.maximum_attribute_length), '<NULL>')||'] <> ['||nvl(to_char(t2.maximum_attribute_length), '<NULL>')||']'<br />         WHEN (t.attribute_precision IS NOT NULL OR t2.attribute_precision IS NOT NULL) AND lnnvl(t.attribute_precision = t2.attribute_precision) THEN 'Att Decimal Places is different: ['||nvl(to_char(t.attribute_precision), '<NULL>')||'] <> ['||nvl(to_char(t2.attribute_precision), '<NULL>')||']'<br />         WHEN (t.unit_of_measure IS NOT NULL OR t2.unit_of_measure IS NOT NULL) AND lnnvl(t.unit_of_measure = t2.unit_of_measure) THEN 'Unit Of Measure is different: ['||nvl(t.unit_of_measure, '<NULL>')||'] <> ['||nvl(t2.unit_of_measure, '<NULL>')||']'<br />         WHEN (t.derivation IS NOT NULL OR t2.derivation IS NOT NULL) AND lnnvl(t.derivation = t2.derivation) THEN 'Derivation is different: ['||nvl(t.derivation, '<NULL>')||'] <> ['||nvl(t2.derivation, '<NULL>')||']'<br />         WHEN (t.datatype IS NOT NULL OR t2.datatype IS NOT NULL) AND lnnvl(t.datatype = t2.datatype) THEN 'Datatype is different: ['||nvl(t.datatype, '<NULL>')||'] <> ['||nvl(t2.datatype, '<NULL>')||']'<br />         WHEN (t.average_column_length IS NOT NULL OR t2.average_column_length IS NOT NULL) AND lnnvl(t.average_column_length = t2.average_column_length) THEN 'Average Col Length is different: ['||nvl(to_char(t.average_column_length), '<NULL>')||'] <> ['||nvl(to_char(t2.average_column_length), '<NULL>')||']'<br />         WHEN (t.maximum_column_length IS NOT NULL OR t2.maximum_column_length IS NOT NULL) AND lnnvl(t.maximum_column_length = t2.maximum_column_length) THEN 'Maximum Col Length is different: ['||nvl(to_char(t.maximum_column_length), '<NULL>')||'] <> ['||nvl(to_char(t2.maximum_column_length), '<NULL>')||']'<br />         WHEN (t.column_precision IS NOT NULL OR t2.column_precision IS NOT NULL) AND lnnvl(t.column_precision = t2.column_precision) THEN 'Col Decimal Places is different: ['||nvl(to_char(t.column_precision), '<NULL>')||'] <> ['||nvl(to_char(t2.column_precision), '<NULL>')||']'<br />         WHEN (t.default_value_type IS NOT NULL OR t2.default_value_type IS NOT NULL) AND lnnvl(t.default_value_type = t2.default_value_type) THEN 'Default is different: ['||nvl(t.default_value_type, '<NULL>')||'] <> ['||nvl(t2.default_value_type, '<NULL>')||']'<br />         WHEN (t.default_value IS NOT NULL OR t2.default_value IS NOT NULL) AND lnnvl(t.default_value = t2.default_value) THEN 'Null value is different: ['||nvl(t.default_value, '<NULL>')||'] <> ['||nvl(t2.default_value, '<NULL>')||']'<br />       END compare_status<br />  FROM domain_system t<br />  LEFT OUTER JOIN domain_system t2 ON t.domain = t2.domain<br />                                  AND t2.system = DECODE(t.system<br />                                                        ,'Application_1'<br />                                                        ,'Application_2'<br />                                                        ,'Application_1')<br /> WHERE t.system IN ('Application_2', 'Application_1')<br />   AND (lnnvl(t.domain = t2.domain)<br />       or (t.format IS NOT NULL OR t2.format IS NOT NULL) AND lnnvl(t.format = t2.format)<br />       or (t.average_attribute_length IS NOT NULL OR t2.average_attribute_length IS NOT NULL) AND lnnvl(t.average_attribute_length = t2.average_attribute_length)<br />       or (t.maximum_attribute_length IS NOT NULL OR t2.maximum_attribute_length IS NOT NULL) AND lnnvl(t.maximum_attribute_length = t2.maximum_attribute_length)<br />       or (t.attribute_precision IS NOT NULL OR t2.attribute_precision IS NOT NULL) AND lnnvl(t.attribute_precision = t2.attribute_precision)<br />       or (t.unit_of_measure IS NOT NULL OR t2.unit_of_measure IS NOT NULL) AND lnnvl(t.unit_of_measure = t2.unit_of_measure)<br />       or (t.derivation IS NOT NULL OR t2.derivation IS NOT NULL) AND lnnvl(t.derivation = t2.derivation)<br />       or (t.datatype IS NOT NULL OR t2.datatype IS NOT NULL) AND lnnvl(t.datatype = t2.datatype)<br />       or (t.average_column_length IS NOT NULL OR t2.average_column_length IS NOT NULL) AND lnnvl(t.average_column_length = t2.average_column_length)<br />       or (t.maximum_column_length IS NOT NULL OR t2.maximum_column_length IS NOT NULL) AND lnnvl(t.maximum_column_length = t2.maximum_column_length)<br />       or (t.column_precision IS NOT NULL OR t2.column_precision IS NOT NULL) AND lnnvl(t.column_precision = t2.column_precision)<br />       or (t.default_value_type IS NOT NULL OR t2.default_value_type IS NOT NULL) AND lnnvl(t.default_value_type = t2.default_value_type)<br />       or (t.default_value IS NOT NULL OR t2.default_value IS NOT NULL) AND lnnvl(t.default_value = t2.default_value))<br />   AND (t2.domain IS NULL OR t.system = 'Application_1')<br /> ORDER BY t.system, t.domain;</pre></li><br /><li>Compare domain allowable values<br /><pre>WITH domain_attrib_system AS (<br />SELECT d.NAME domain<br />      ,av.abbreviation<br />      ,av.high_value<br />      ,av.high_value_type<br />      ,av.low_value<br />      ,av.low_value_type<br />      ,av.meaning<br />      ,av.radio_sequence<br />      ,s.NAME system<br />  FROM repadm.ci_domains d<br />  JOIN repadm.ci_attribute_values av ON av.domain_reference = d.id<br />  JOIN repadm.ci_app_sys_domains sd ON sd.domain_reference = d.id<br />  JOIN repadm.ci_application_systems s ON s.id = sd.application_system_reference<br />)<br />SELECT t.system<br />      ,t.domain<br />      ,t.abbreviation<br />      ,t.high_value<br />      ,t.high_value_type<br />      ,t.low_value<br />      ,t.low_value_type<br />      ,t.meaning<br />      ,t.radio_sequence<br />      ,decode(t2.domain, t.domain, 'OK', 'missing')<br />  FROM domain_attrib_system t<br />  LEFT OUTER JOIN domain_attrib_system t2 ON t.domain = t2.domain<br />                                         AND lnnvl(t.abbreviation <> t2.abbreviation)<br />                                         AND lnnvl(t.high_value <> t2.high_value)<br />                                         AND lnnvl(t.high_value_type <> t2.high_value_type)<br />                                         AND lnnvl(t.low_value <> t2.low_value)<br />                                         AND lnnvl(t.low_value_type <> t2.low_value_type)<br />                                         AND lnnvl(t.meaning <> t2.meaning)<br />                                         AND lnnvl(t.radio_sequence <> t2.radio_sequence)<br />                                         AND t2.system = DECODE(t.system<br />                                                               ,'Application_1'<br />                                                               ,'Application_2'<br />                                                               ,'Application_1')<br /> WHERE t.system IN ('Application_2', 'Application_1')<br />   AND t2.domain IS NULL<br /> ORDER BY t.system, t.domain;</pre></li></ol>